根据提供的 `git diff` 记录，以下是对代码变更的评审：

### 1. `UserConditionEntity` 类变更

**变更内容**：
- 添加了 `lastLoginCity` 字段，用于存储用户最后登录的城市。

**评审**：
- 添加 `lastLoginCity` 字段是一个合理的改进，它可以帮助用户了解自己的登录历史。
- 应确保 `lastLoginCity` 字段的值在数据库中存储有效，例如，可以使用 ISO 3166-1 alpha-2 国家代码格式。
- 添加了相应的 `@ApiModelProperty` 注解，这是好的实践，以便API使用者可以了解字段的含义。

### 2. `UserEntity` 类变更

**变更内容**：
- 添加了 `lastLoginCity` 和 `lastLoginTime` 字段，分别用于存储用户最后登录的城市和时间。

**评审**：
- 添加这两个字段是一个很好的改进，它们可以提供更多的用户活动信息。
- 应该确保 `lastLoginTime` 字段的值是正确的日期和时间格式。
- `lastLoginCity` 字段应该与 `UserConditionEntity` 中的字段保持同步。

### 3. `UserService` 类变更

**变更内容**：
- 在用户登录时，添加了获取用户最后登录城市和时间的逻辑。
- 添加了异地登录验证逻辑，如果检测到异地登录，则要求用户修改密码。
- 添加了更新用户最后登录城市和时间的逻辑。

**评审**：
- 添加异地登录验证是一个重要的安全特性，可以防止未经授权的访问。
- 验证逻辑应该考虑到网络延迟和时区差异，确保准确性。
- 更新最后登录城市和时间的逻辑应该确保这些值在数据库中正确更新。
- 代码中使用了 `IpUtil.getIpAddr(httpServletRequest)` 来获取IP地址，这是好的实践，但应确保 `IpUtil` 类的正确性和可靠性。

### 4. `UserMapper.xml` 变更

**变更内容**：
- 添加了 `lastLoginCity` 和 `lastLoginTime` 字段到 `sys_user` 表的 `resultMap` 和 `update` SQL语句中。

**评审**：
- 更新 `resultMap` 和 `update` SQL语句以包含新的字段是必要的，以确保这些字段在数据库中正确映射和更新。
- 应确保 `lastLoginCity` 和 `lastLoginTime` 字段在数据库中的数据类型与 Java 类中定义的类型相匹配。

### 5. `application.yml` 变更

**变更内容**：
- 修改了 Redis 的连接信息。

**评审**：
- 更新 Redis 连接信息是必要的，如果之前使用的连接信息有误。
- 应确保新的连接信息是正确的，以避免配置错误。

### 总结

整体上，这些变更看起来是合理的，并且增加了用户管理的功能和安全性。然而，应确保所有变更都经过彻底测试，以确保它们按预期工作，并且不会引入新的错误。